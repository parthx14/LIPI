// Netlify serverless function for LIPI script generation
exports.handler = async (event, context) => {
  // Handle CORS preflight
  if (event.httpMethod === 'OPTIONS') {
    return {
      statusCode: 200,
      headers: {
        'Access-Control-Allow-Origin': '*',
        'Access-Control-Allow-Headers': 'Content-Type',
        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS'
      }
    };
  }

  // Only allow POST requests
  if (event.httpMethod !== 'POST') {
    return {
      statusCode: 405,
      headers: {
        'Access-Control-Allow-Origin': '*',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ success: false, error: 'Method not allowed' })
    };
  }

  try {
    const data = JSON.parse(event.body);
    
    // Handle both old format (scriptType, tone, topic) and new format (prompt)
    let scriptType, tone, topic, duration, language;
    
    if (data.prompt) {
      // New simplified format - extract from prompt
      topic = data.prompt;
      scriptType = 'TikTok/Reels'; // Default for simple prompts
      tone = 'Conversational';
      duration = '60-seconds';
      language = 'english';
    } else {
      // Old detailed format
      ({ scriptType, tone, topic, duration, language } = data);
      
      if (!scriptType || !tone || !topic) {
        return {
          statusCode: 400,
          headers: {
            'Access-Control-Allow-Origin': '*',
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            success: false,
            error: 'Missing required fields: either provide "prompt" or "scriptType, tone, topic"'
          })
        };
      }
    }

    const script = generateScript(
      scriptType, 
      tone, 
      topic, 
      duration || '2-minutes', 
      language || 'english'
    );
    
    return {
      statusCode: 200,
      headers: {
        'Access-Control-Allow-Origin': '*',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        success: true,
        script: script.content.hook + '\n\n' + script.content.mainContent + '\n\n' + script.content.callToAction,
        metadata: script.metadata,
        timestamp: new Date().toISOString()
      })
    };
  } catch (error) {
    console.error('Error generating script:', error);
    return {
      statusCode: 500,
      headers: {
        'Access-Control-Allow-Origin': '*',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        success: false,
        error: 'Internal server error: ' + error.message
      })
    };
  }
};

// Helper functions
function parseDuration(duration) {
  const [amount, unit] = duration.split('-');
  return {
    amount: parseInt(amount),
    unit: unit,
    totalSeconds: unit === 'seconds' ? parseInt(amount) : parseInt(amount) * 60
  };
}

function calculateTargetWords(durationInfo, scriptType) {
  const wpmRates = {
    'YouTube Video': 150,
    'TikTok/Reels': 180,
    'Instagram Story': 180,
    'Advertisement': 160,
    'Educational Explainer': 140,
    'Business Presentation': 130
  };
  
  const wpm = wpmRates[scriptType] || 150;
  const minutes = durationInfo.totalSeconds / 60;
  return Math.round(wpm * minutes);
}

function getLanguageTemplates(language, scriptType, tone, topic) {
  const templates = {
    'english': {
      hooks: {
        'YouTube Video': {
          'Conversational': `Hey everyone! What if I told you that everything you know about ${topic} is completely wrong?`,
          'Professional': `Today I want to address a common misconception about ${topic} that's been holding people back.`,
          'Witty': `Plot twist: Everything you think you know about ${topic} is about as accurate as a weather forecast.`,
          'Inspirational': `Your journey with ${topic} is about to take an incredible turn. Here's why.`,
          'Storytelling': `Let me tell you about the day I discovered the truth about ${topic} that changed everything.`,
          'Persuasive': `What if I could prove to you that ${topic} isn't what you think it is?`
        },
        'TikTok/Reels': {
          'Conversational': `POV: You just discovered the ${topic} hack that changes everything`,
          'Professional': `The ${topic} strategy that industry experts don't want you to know`,
          'Witty': `Me explaining ${topic} to my past self who had no clue`,
          'Inspirational': `This ${topic} revelation will transform your perspective`,
          'Storytelling': `The ${topic} mistake I made so you don't have to`,
          'Persuasive': `Why everyone's doing ${topic} wrong (and how to fix it)`
        },
        'Instagram Story': {
          'Conversational': `Quick ${topic} tip that changed my life ‚ú®`,
          'Professional': `Professional insight: ${topic} strategy that works`,
          'Witty': `${topic} hack that's almost too good to share üòè`,
          'Inspirational': `Your ${topic} breakthrough starts here üí´`,
          'Storytelling': `The ${topic} story you need to hear`,
          'Persuasive': `This ${topic} secret will blow your mind`
        },
        'Advertisement': {
          'Conversational': `Tired of struggling with ${topic}? I found something that actually works.`,
          'Professional': `Introducing the professional-grade solution for ${topic} challenges.`,
          'Witty': `${topic} problems? We've got the cure (and it's not snake oil).`,
          'Inspirational': `Transform your ${topic} journey with this breakthrough solution.`,
          'Storytelling': `Here's how thousands overcame their ${topic} struggles.`,
          'Persuasive': `The ${topic} solution that delivers guaranteed results.`
        },
        'Educational Explainer': {
          'Conversational': `Have you ever wondered why ${topic} works the way it does? Let's dive in!`,
          'Professional': `Today we'll examine the fundamental principles behind ${topic}.`,
          'Witty': `${topic} explained like you're five (but smarter).`,
          'Inspirational': `Understanding ${topic} will unlock new possibilities for you.`,
          'Storytelling': `The fascinating story of how ${topic} came to be.`,
          'Persuasive': `Why understanding ${topic} is crucial for your success.`
        },
        'Business Presentation': {
          'Conversational': `Let's talk about how ${topic} can drive real value for our team.`,
          'Professional': `Today we're exploring how ${topic} can drive significant value for our organization.`,
          'Witty': `${topic}: The secret weapon hiding in plain sight.`,
          'Inspirational': `${topic} represents our next big opportunity for growth.`,
          'Storytelling': `Here's how leading companies are leveraging ${topic} for success.`,
          'Persuasive': `The data shows ${topic} is essential for our competitive advantage.`
        }
      },
      ctas: {
        'YouTube Video': `If this helped you understand ${topic} better, hit that like button and subscribe for more insights like this!`,
        'TikTok/Reels': `Follow for more ${topic} tips! What should I cover next?`,
        'Instagram Story': `DM me "TIPS" for my complete ${topic} guide!`,
        'Advertisement': `Ready to master ${topic}? Click the link below to get started today!`,
        'Educational Explainer': `Now that you understand ${topic}, try applying these concepts and let me know how it goes!`,
        'Business Presentation': `Let's discuss how we can implement these ${topic} strategies in our next meeting.`
      }
    },
    'hindi': {
      hooks: {
        'YouTube Video': {
          'Conversational': `‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞ ‡§¶‡•ã‡§∏‡•ç‡§§‡•ã‡§Ç! ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ ‡§Ö‡§ó‡§∞ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§¨‡§§‡§æ‡§ä‡§Ç ‡§ï‡§ø ${topic} ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§ú‡•ã ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§ú‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç ‡§µ‡•ã ‡§ó‡§≤‡§§ ‡§π‡•à?`,
          'Professional': `‡§Ü‡§ú ‡§Æ‡•à‡§Ç ${topic} ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ó‡§≤‡§§‡§´‡§π‡§Æ‡•Ä ‡§ï‡•ã ‡§¶‡•Ç‡§∞ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§`,
          'Witty': `Plot twist: ${topic} ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§â‡§§‡§®‡•Ä ‡§π‡•Ä ‡§∏‡§ü‡•Ä‡§ï ‡§π‡•à ‡§ú‡§ø‡§§‡§®‡§æ ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®‡•§`,
          'Inspirational': `${topic} ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ü‡§™‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§è‡§ï ‡§Ö‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§Æ‡•ã‡§°‡§º ‡§≤‡•á‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§π‡•à‡•§`,
          'Storytelling': `‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§â‡§∏ ‡§¶‡§ø‡§® ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ‡§§‡§æ ‡§π‡•Ç‡§Ç ‡§ú‡§¨ ‡§Æ‡•à‡§Ç‡§®‡•á ${topic} ‡§ï‡•Ä ‡§∏‡§ö‡•ç‡§ö‡§æ‡§à ‡§ñ‡•ã‡§ú‡•Ä‡•§`,
          'Persuasive': `‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ ‡§Ö‡§ó‡§∞ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§∏‡§æ‡§¨‡§ø‡§§ ‡§ï‡§∞ ‡§¶‡•Ç‡§Ç ‡§ï‡§ø ${topic} ‡§µ‡•ã ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à ‡§ú‡•ã ‡§Ü‡§™ ‡§∏‡•ã‡§ö‡§§‡•á ‡§π‡•à‡§Ç?`
        },
        'TikTok/Reels': {
          'Conversational': `POV: ‡§Ü‡§™‡§®‡•á ‡§Ö‡§≠‡•Ä ${topic} ‡§ï‡§æ ‡§µ‡•ã hack ‡§ñ‡•ã‡§ú‡§æ ‡§π‡•à ‡§ú‡•ã ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§¨‡§¶‡§≤ ‡§¶‡•á‡§§‡§æ ‡§π‡•à`,
          'Professional': `${topic} ‡§ï‡•Ä ‡§µ‡•ã strategy ‡§ú‡•ã experts ‡§®‡§π‡•Ä‡§Ç ‡§¨‡§§‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á`,
          'Witty': `‡§Æ‡•à‡§Ç ‡§Ö‡§™‡§®‡•á past self ‡§ï‡•ã ${topic} explain ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç ‡§ú‡§ø‡§∏‡•á ‡§ï‡•Å‡§õ ‡§™‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§•‡§æ`,
          'Inspirational': `‡§Ø‡§π ${topic} revelation ‡§Ü‡§™‡§ï‡§æ perspective ‡§¨‡§¶‡§≤ ‡§¶‡•á‡§ó‡§æ`,
          'Storytelling': `${topic} ‡§ï‡•Ä ‡§µ‡•ã ‡§ó‡§≤‡§§‡•Ä ‡§ú‡•ã ‡§Æ‡•à‡§Ç‡§®‡•á ‡§ï‡•Ä ‡§§‡§æ‡§ï‡§ø ‡§Ü‡§™ ‡§® ‡§ï‡§∞‡•á‡§Ç`,
          'Persuasive': `‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§∏‡§≠‡•Ä ${topic} ‡§ó‡§≤‡§§ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç (‡§î‡§∞ ‡§ï‡•à‡§∏‡•á ‡§†‡•Ä‡§ï ‡§ï‡§∞‡•á‡§Ç)`
        },
        'Instagram Story': {
          'Conversational': `${topic} ‡§ï‡•Ä quick tip ‡§ú‡§ø‡§∏‡§®‡•á ‡§Æ‡•á‡§∞‡•Ä ‡§ú‡§ø‡§Ç‡§¶‡§ó‡•Ä ‡§¨‡§¶‡§≤ ‡§¶‡•Ä ‚ú®`,
          'Professional': `Professional insight: ${topic} strategy ‡§ú‡•ã ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à`,
          'Witty': `${topic} hack ‡§ú‡•ã share ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§π‡•à üòè`,
          'Inspirational': `‡§Ü‡§™‡§ï‡§æ ${topic} breakthrough ‡§Ø‡§π‡§æ‡§Ç ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à üí´`,
          'Storytelling': `${topic} ‡§ï‡•Ä story ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•ã ‡§∏‡•Å‡§®‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è`,
          'Persuasive': `‡§Ø‡§π ${topic} secret ‡§Ü‡§™‡§ï‡§æ ‡§¶‡§ø‡§Æ‡§æ‡§ó ‡§â‡§°‡§º‡§æ ‡§¶‡•á‡§ó‡§æ`
        }
      },
      ctas: {
        'YouTube Video': `‡§Ö‡§ó‡§∞ ‡§á‡§∏‡§∏‡•á ‡§Ü‡§™‡§ï‡•ã ${topic} ‡§∏‡§Æ‡§ù‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§Æ‡§ø‡§≤‡•Ä, ‡§§‡•ã like button ‡§¶‡§¨‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§ê‡§∏‡•Ä ‡§î‡§∞ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è subscribe ‡§ï‡§∞‡•á‡§Ç!`,
        'TikTok/Reels': `‡§î‡§∞ ${topic} tips ‡§ï‡•á ‡§≤‡§ø‡§è follow ‡§ï‡§∞‡•á‡§Ç! ‡§Ö‡§ó‡§≤‡§æ ‡§ï‡•ç‡§Ø‡§æ cover ‡§ï‡§∞‡•Ç‡§Ç?`,
        'Instagram Story': `‡§Æ‡•á‡§∞‡•Ä complete ${topic} guide ‡§ï‡•á ‡§≤‡§ø‡§è "TIPS" DM ‡§ï‡§∞‡•á‡§Ç!`,
        'Advertisement': `${topic} ‡§Æ‡•á‡§Ç ‡§Æ‡§π‡§æ‡§∞‡§§ ‡§π‡§æ‡§∏‡§ø‡§≤ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡§Ç? ‡§Ü‡§ú ‡§π‡•Ä ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§è ‡§ó‡§è link ‡§™‡§∞ click ‡§ï‡§∞‡•á‡§Ç!`,
        'Educational Explainer': `‡§Ö‡§¨ ‡§ú‡§¨ ‡§Ü‡§™ ${topic} ‡§∏‡§Æ‡§ù ‡§ó‡§è ‡§π‡•à‡§Ç, ‡§á‡§® concepts ‡§ï‡•ã apply ‡§ï‡§∞‡§ï‡•á ‡§¶‡•á‡§ñ‡•á‡§Ç!`,
        'Business Presentation': `‡§Ü‡§á‡§è discuss ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§π‡§Æ ‡§á‡§® ${topic} strategies ‡§ï‡•ã ‡§ï‡•à‡§∏‡•á implement ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§`
      }
    },
    'spanish': {
      hooks: {
        'YouTube Video': {
          'Conversational': `¬°Hola a todos! ¬øQu√© pasar√≠a si te dijera que todo lo que sabes sobre ${topic} est√° completamente mal?`,
          'Professional': `Hoy quiero abordar un concepto err√≥neo com√∫n sobre ${topic} que est√° limitando a las personas.`,
          'Witty': `Plot twist: Todo lo que crees saber sobre ${topic} es tan preciso como un pron√≥stico del tiempo.`,
          'Inspirational': `Tu viaje con ${topic} est√° a punto de tomar un giro incre√≠ble. Aqu√≠ te explico por qu√©.`,
          'Storytelling': `D√©jame contarte sobre el d√≠a que descubr√≠ la verdad sobre ${topic} que cambi√≥ todo.`,
          'Persuasive': `¬øQu√© pasar√≠a si pudiera probarte que ${topic} no es lo que piensas?`
        },
        'TikTok/Reels': {
          'Conversational': `POV: Acabas de descubrir el truco de ${topic} que lo cambia todo`,
          'Professional': `La estrategia de ${topic} que los expertos no quieren que sepas`,
          'Witty': `Yo explic√°ndole ${topic} a mi yo del pasado que no ten√≠a ni idea`,
          'Inspirational': `Esta revelaci√≥n de ${topic} transformar√° tu perspectiva`,
          'Storytelling': `El error de ${topic} que comet√≠ para que t√∫ no tengas que hacerlo`,
          'Persuasive': `Por qu√© todos est√°n haciendo ${topic} mal (y c√≥mo arreglarlo)`
        },
        'Instagram Story': {
          'Conversational': `Consejo r√°pido de ${topic} que cambi√≥ mi vida ‚ú®`,
          'Professional': `Insight profesional: estrategia de ${topic} que funciona`,
          'Witty': `Hack de ${topic} que es casi demasiado bueno para compartir üòè`,
          'Inspirational': `Tu breakthrough de ${topic} comienza aqu√≠ üí´`,
          'Storytelling': `La historia de ${topic} que necesitas escuchar`,
          'Persuasive': `Este secreto de ${topic} te volar√° la mente`
        }
      },
      ctas: {
        'YouTube Video': `Si esto te ayud√≥ a entender mejor ${topic}, dale like y suscr√≠bete para m√°s contenido como este!`,
        'TikTok/Reels': `¬°S√≠gueme para m√°s consejos de ${topic}! ¬øQu√© deber√≠a cubrir despu√©s?`,
        'Instagram Story': `¬°Env√≠ame "TIPS" por DM para mi gu√≠a completa de ${topic}!`,
        'Advertisement': `¬øListo para dominar ${topic}? ¬°Haz clic en el enlace de abajo para comenzar hoy!`,
        'Educational Explainer': `Ahora que entiendes ${topic}, ¬°prueba aplicar estos conceptos y cu√©ntame c√≥mo te va!`,
        'Business Presentation': `Discutamos c√≥mo podemos implementar estas estrategias de ${topic} en nuestra pr√≥xima reuni√≥n.`
      }
    },
    'french': {
      hooks: {
        'YouTube Video': {
          'Conversational': `Salut tout le monde! Et si je vous disais que tout ce que vous savez sur ${topic} est compl√®tement faux?`,
          'Professional': `Aujourd'hui, je veux aborder une id√©e fausse courante sur ${topic} qui limite les gens.`,
          'Witty': `Plot twist: Tout ce que vous pensez savoir sur ${topic} est aussi pr√©cis qu'une m√©t√©o.`,
          'Inspirational': `Votre parcours avec ${topic} va prendre un tournant incroyable. Voici pourquoi.`,
          'Storytelling': `Laissez-moi vous raconter le jour o√π j'ai d√©couvert la v√©rit√© sur ${topic}.`,
          'Persuasive': `Et si je pouvais vous prouver que ${topic} n'est pas ce que vous pensez?`
        }
      },
      ctas: {
        'YouTube Video': `Si cela vous a aid√© √† mieux comprendre ${topic}, likez et abonnez-vous pour plus de contenu!`,
        'TikTok/Reels': `Suivez-moi pour plus de conseils sur ${topic}! Que devrais-je couvrir ensuite?`,
        'Instagram Story': `Envoyez-moi "TIPS" en DM pour mon guide complet sur ${topic}!`
      }
    },
    'bengali': {
      hooks: {
        'YouTube Video': {
          'Conversational': `‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã ‡¶∏‡¶¨‡¶æ‡¶á! ${topic} ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ø‡¶æ ‡¶ú‡¶æ‡¶®‡ßá‡¶® ‡¶§‡¶æ ‡¶Ø‡¶¶‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶≠‡ßÅ‡¶≤ ‡¶π‡¶Ø‡¶º ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶ï‡ßÄ ‡¶π‡¶¨‡ßá?`,
          'Professional': `‡¶Ü‡¶ú ‡¶Ü‡¶Æ‡¶ø ${topic} ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶≠‡ßÅ‡¶≤ ‡¶ß‡¶æ‡¶∞‡¶£‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡•§`,
          'Witty': `Plot twist: ${topic} ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶Ü‡¶¨‡¶π‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶≠‡¶æ‡¶∏‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã‡¶á ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡ßÅ‡¶≤‡•§`,
          'Inspirational': `${topic} ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶Ø ‡¶Æ‡ßã‡¶°‡¶º ‡¶®‡¶ø‡¶§‡ßá ‡¶ö‡¶≤‡ßá‡¶õ‡ßá‡•§`,
          'Storytelling': `‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡ßá‡¶á ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶ø ‡¶Ø‡ßá‡¶¶‡¶ø‡¶® ‡¶Ü‡¶Æ‡¶ø ${topic} ‡¶è‡¶∞ ‡¶∏‡¶§‡ßç‡¶Ø ‡¶Ü‡¶¨‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ‡•§`,
          'Persuasive': `‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶Æ‡¶ø ‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø ‡¶Ø‡ßá ${topic} ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ø‡¶æ ‡¶≠‡¶æ‡¶¨‡ßá‡¶® ‡¶§‡¶æ ‡¶®‡¶Ø‡¶º?`
        }
      },
      ctas: {
        'YouTube Video': `‡¶Ø‡¶¶‡¶ø ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ${topic} ‡¶Ü‡¶∞‡¶ì ‡¶≠‡¶æ‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡ßá, ‡¶≤‡¶æ‡¶á‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ö‡¶æ‡¶™‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶æ‡¶á‡¶¨ ‡¶ï‡¶∞‡ßÅ‡¶®!`,
        'TikTok/Reels': `‡¶Ü‡¶∞‡¶ì ${topic} ‡¶ü‡¶ø‡¶™‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶´‡¶≤‡ßã ‡¶ï‡¶∞‡ßÅ‡¶®! ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ‡¶§‡ßá ‡¶ï‡ßÄ ‡¶ï‡¶≠‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨?`,
        'Instagram Story': `‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ${topic} ‡¶ó‡¶æ‡¶á‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø "TIPS" DM ‡¶ï‡¶∞‡ßÅ‡¶®!`
      }
    },
    'tamil': {
      hooks: {
        'YouTube Video': {
          'Conversational': `‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç ‡Æ®‡Æ£‡Øç‡Æ™‡Æ∞‡Øç‡Æï‡Æ≥‡Øá! ${topic} ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ ‡Æé‡Æ≤‡Øç‡Æ≤‡Ææ‡ÆÆ‡Øç ‡Æ§‡Æµ‡Æ±‡ØÅ ‡Æé‡Æ©‡Øç‡Æ±‡ØÅ ‡Æö‡Øä‡Æ©‡Øç‡Æ©‡Ææ‡Æ≤‡Øç ‡Æé‡Æ©‡Øç‡Æ© ‡Æ®‡Æø‡Æ©‡Øà‡Æ™‡Øç‡Æ™‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç?`,
          'Professional': `‡Æá‡Æ©‡Øç‡Æ±‡ØÅ ‡Æ®‡Ææ‡Æ©‡Øç ${topic} ‡Æ™‡Æ±‡Øç‡Æ±‡Æø‡ÆØ ‡Æí‡Æ∞‡ØÅ ‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ© ‡Æ§‡Æµ‡Æ±‡Ææ‡Æ© ‡Æï‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡Øà ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï ‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç.`,
          'Witty': `Plot twist: ${topic} ‡Æ™‡Æ±‡Øç‡Æ±‡Æø‡ÆØ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æµ‡ØÅ ‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà ‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ™‡Øã‡Æ≤ ‡Æ§‡ØÅ‡Æ≤‡Øç‡Æ≤‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æ©‡Æ§‡ØÅ.`,
          'Inspirational': `${topic} ‡Æâ‡Æü‡Æ©‡Ææ‡Æ© ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡ÆØ‡Æ£‡ÆÆ‡Øç ‡Æí‡Æ∞‡ØÅ ‡ÆÖ‡Æ±‡Øç‡Æ™‡ØÅ‡Æ§‡ÆÆ‡Ææ‡Æ© ‡Æ§‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æ§‡Øç‡Æ§‡Øà ‡Æé‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æ™‡Øç ‡Æ™‡Øã‡Æï‡Æø‡Æ±‡Æ§‡ØÅ.`,
          'Storytelling': `${topic} ‡Æ™‡Æ±‡Øç‡Æ±‡Æø‡ÆØ ‡Æâ‡Æ£‡Øç‡ÆÆ‡Øà‡ÆØ‡Øà ‡Æ®‡Ææ‡Æ©‡Øç ‡Æï‡Æ£‡Øç‡Æü‡ØÅ‡Æ™‡Æø‡Æü‡Æø‡Æ§‡Øç‡Æ§ ‡Æ®‡Ææ‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æö‡Øä‡Æ≤‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç.`,
          'Persuasive': `${topic} ‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Æø‡Æ©‡Øà‡Æ™‡Øç‡Æ™‡Æ§‡ØÅ ‡ÆÖ‡Æ≤‡Øç‡Æ≤ ‡Æé‡Æ©‡Øç‡Æ±‡ØÅ ‡Æ®‡Æø‡Æ∞‡ØÇ‡Æ™‡Æø‡Æï‡Øç‡Æï ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æ®‡Øç‡Æ§‡Ææ‡Æ≤‡Øç ‡Æé‡Æ©‡Øç‡Æ©?`
        }
      },
      ctas: {
        'YouTube Video': `‡Æá‡Æ§‡ØÅ ${topic} ‡Æê ‡Æ®‡Æ©‡Øç‡Æ±‡Ææ‡Æï ‡Æ™‡ØÅ‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æï‡Øä‡Æ≥‡Øç‡Æ≥ ‡Æâ‡Æ§‡Æµ‡Æø‡ÆØ‡Æø‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Ææ‡Æ≤‡Øç, ‡Æ≤‡Øà‡Æï‡Øç ‡Æ™‡Æü‡Øç‡Æü‡Æ©‡Øà ‡ÆÖ‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡Æø ‡Æö‡Æ™‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Øà‡Æ™‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!`,
        'TikTok/Reels': `‡ÆÆ‡Øá‡Æ≤‡ØÅ‡ÆÆ‡Øç ${topic} ‡Æü‡Æø‡Æ™‡Øç‡Æ∏‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æé‡Æ©‡Øç‡Æ©‡Øà ‡Æ™‡Ææ‡Æ≤‡Øã ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç! ‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ ‡Æé‡Æ§‡Øà ‡Æï‡Æµ‡Æ∞‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æü‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç?`,
        'Instagram Story': `‡Æé‡Æ©‡Æ§‡ØÅ ‡ÆÆ‡ØÅ‡Æ¥‡ØÅ‡ÆÆ‡Øà‡ÆØ‡Ææ‡Æ© ${topic} ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø‡Æï‡Øç‡Æï‡ØÅ "TIPS" DM ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!`
      }
    },
    'urdu': {
      hooks: {
        'YouTube Video': {
          'Conversational': `ÿßŸÑÿ≥ŸÑÿßŸÖ ÿπŸÑ€å⁄©ŸÖ ÿØŸàÿ≥ÿ™Ÿà! ÿß⁄Øÿ± ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©Ÿà ÿ®ÿ™ÿßÿ§⁄∫ ⁄©€Å ${topic} ⁄©€í ÿ®ÿßÿ±€í ŸÖ€å⁄∫ ÿ¢Ÿæ ÿ¨Ÿà ⁄©⁄Ü⁄æ ÿ¨ÿßŸÜÿ™€í €Å€å⁄∫ Ÿà€Å ÿ®ÿßŸÑ⁄©ŸÑ ÿ∫ŸÑÿ∑ €Å€íÿü`,
          'Professional': `ÿ¢ÿ¨ ŸÖ€å⁄∫ ${topic} ⁄©€í ÿ®ÿßÿ±€í ŸÖ€å⁄∫ ÿß€å⁄© ÿπÿßŸÖ ÿ∫ŸÑÿ∑ ŸÅ€ÅŸÖ€å ⁄©Ÿà ÿØŸàÿ± ⁄©ÿ±ŸÜÿß ⁄Üÿß€Åÿ™ÿß €ÅŸà⁄∫€î`,
          'Witty': `Plot twist: ${topic} ⁄©€í ÿ®ÿßÿ±€í ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©ÿß ÿπŸÑŸÖ ŸÖŸàÿ≥ŸÖ€å Ÿæ€åÿ¥ŸÜ ⁄ØŸàÿ¶€å ÿ¨ÿ™ŸÜÿß ÿØÿ±ÿ≥ÿ™ €Å€í€î`,
          'Inspirational': `${topic} ⁄©€í ÿ≥ÿßÿ™⁄æ ÿ¢Ÿæ ⁄©ÿß ÿ≥ŸÅÿ± ÿß€å⁄© ŸÜÿßŸÇÿßÿ®ŸÑ €åŸÇ€åŸÜ ŸÖŸà⁄ë ŸÑ€åŸÜ€í ŸàÿßŸÑÿß €Å€í€î`,
          'Storytelling': `ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©Ÿà ÿßÿ≥ ÿØŸÜ ⁄©€í ÿ®ÿßÿ±€í ŸÖ€å⁄∫ ÿ®ÿ™ÿßÿ™ÿß €ÅŸà⁄∫ ÿ¨ÿ® ŸÖ€å⁄∫ ŸÜ€í ${topic} ⁄©€å ÿ≠ŸÇ€åŸÇÿ™ ÿØÿ±€åÿßŸÅÿ™ ⁄©€å€î`,
          'Persuasive': `ÿß⁄Øÿ± ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©Ÿà ÿ´ÿßÿ®ÿ™ ⁄©ÿ± ÿØŸà⁄∫ ⁄©€Å ${topic} Ÿà€Å ŸÜ€Å€å⁄∫ ÿ¨Ÿà ÿ¢Ÿæ ÿ≥Ÿà⁄Üÿ™€í €Å€å⁄∫ÿü`
        }
      },
      ctas: {
        'YouTube Video': `ÿß⁄Øÿ± ÿßÿ≥ ÿ≥€í ÿ¢Ÿæ ⁄©Ÿà ${topic} ÿ≥ŸÖÿ¨⁄æŸÜ€í ŸÖ€å⁄∫ ŸÖÿØÿØ ŸÖŸÑ€å ÿ™Ÿà ŸÑÿßÿ¶⁄© ÿ®ŸπŸÜ ÿØÿ®ÿßÿ¶€å⁄∫ ÿßŸàÿ± ÿ≥ÿ®ÿ≥⁄©ÿ±ÿßÿ¶ÿ® ⁄©ÿ±€å⁄∫!`,
        'TikTok/Reels': `ŸÖÿ≤€åÿØ ${topic} ŸπŸæÿ≥ ⁄©€í ŸÑ€å€í ŸÅÿßŸÑŸà ⁄©ÿ±€å⁄∫! ÿß⁄ØŸÑÿß ⁄©€åÿß ⁄©Ÿàÿ± ⁄©ÿ±Ÿà⁄∫ÿü`,
        'Instagram Story': `ŸÖ€åÿ±€å ŸÖ⁄©ŸÖŸÑ ${topic} ⁄Øÿßÿ¶€å⁄à ⁄©€í ŸÑ€å€í "TIPS" DM ⁄©ÿ±€å⁄∫!`
      }
    }
  };
  
  return templates[language] || templates['english'];
}

function generateScript(scriptType, tone, topic, duration, language) {
  const languageTemplates = getLanguageTemplates(language, scriptType, tone, topic);
  const hooks = languageTemplates.hooks;
  const ctas = languageTemplates.ctas;

  const durationInfo = parseDuration(duration);
  const targetWords = calculateTargetWords(durationInfo, scriptType);
  
  let mainContent = generateMainContent(scriptType, tone, topic, targetWords, language);

  const script = {
    id: Date.now().toString(),
    type: scriptType,
    tone: tone,
    topic: topic,
    language: language,
    content: {
      hook: (hooks[scriptType] && hooks[scriptType][tone]) ? hooks[scriptType][tone] : (hooks[scriptType] || hooks['YouTube Video']),
      mainContent: mainContent,
      callToAction: ctas[scriptType] || ctas['YouTube Video']
    },
    metadata: {
      wordCount: mainContent.split(' ').length + 20,
      estimatedDuration: `${Math.ceil(durationInfo.totalSeconds / 60)} minutes`,
      generatedAt: new Date().toISOString()
    }
  };

  return script;
}

function generateMainContent(scriptType, tone, topic, targetWords, language) {
  const contentTemplates = {
    'english': {
      'YouTube Video': {
        'Conversational': {
          short: `${topic} simplified: Here's the one thing that changes everything. Most people completely miss this core principle, but once you get it, everything clicks.`,
          medium: `Let me break down ${topic} in a way that actually makes sense. The biggest mistake people make? They focus on complicated strategies instead of mastering the basics. Here's what really works: start with the foundation, then build up systematically.`,
          long: `I'm going to explain ${topic} in a conversational way that you can actually apply. Most people approach this completely backwards - they jump into advanced tactics without understanding the fundamentals. Here's the truth: ${topic} isn't about following complex formulas. It's about understanding the core principles and applying them consistently. The secret is to focus on one key element at a time, master it, then move to the next level.`
        },
        'Professional': {
          short: `${topic} analysis: The critical factor most professionals overlook is systematic implementation of core methodologies.`,
          medium: `Our research on ${topic} reveals a significant gap in current approaches. Industry leaders consistently emphasize foundational principles over tactical execution. The data shows that organizations focusing on systematic implementation achieve 3x better results.`,
          long: `Based on comprehensive analysis of ${topic}, we've identified key performance indicators that separate successful implementations from failed attempts. The primary differentiator is not technological sophistication, but rather adherence to proven methodological frameworks. Organizations that prioritize systematic approach development, stakeholder alignment, and measurable outcome tracking consistently outperform those focused solely on tactical execution.`
        },
        'Witty': {
          short: `${topic} is like trying to assemble IKEA furniture - everyone thinks they can skip the instructions until they're crying over a pile of screws.`,
          medium: `Here's the thing about ${topic} - it's simpler than rocket science but somehow everyone treats it like brain surgery. The secret sauce? Stop overthinking it. Most people are out here playing 4D chess when it's really just checkers with extra steps.`,
          long: `Let me tell you about ${topic} - it's the digital equivalent of trying to fold a fitted sheet. Everyone pretends they know what they're doing, but we're all just winging it and hoping for the best. The truth is, ${topic} isn't actually that complicated. We just make it complicated because simple solutions don't make us feel smart enough. Here's the plot twist: the most successful people in ${topic} are the ones who figured out how to make it ridiculously simple.`
        }
      },
      'TikTok/Reels': {
        'Conversational': {
          short: `${topic} in 60 seconds: Stop doing what everyone else is doing. Here's the hack that actually works.`,
          medium: `Real talk about ${topic} - everyone's making it way harder than it needs to be. The game-changer? Focus on this one thing instead of trying to do everything at once.`,
          long: `Okay, let's talk ${topic} because I see people struggling with this every day. Here's what nobody tells you: you don't need to be perfect, you just need to be consistent. The biggest mistake? Trying to copy what works for others instead of finding what works for YOU. Start small, stay consistent, and watch everything change.`
        },
        'Witty': {
          short: `${topic} be like: "I'm not like other strategies, I'm a cool strategy." Spoiler alert: it's not that special.`,
          medium: `POV: You're trying to master ${topic} but it's giving you main character energy when you're clearly the comic relief. Here's how to actually win at this game.`,
          long: `${topic} really said "let me be the most confusing thing ever" and we all just accepted that. But here's the tea - it's actually not that deep. Everyone's out here making it sound like you need a PhD when really you just need common sense and the ability to not overthink everything.`
        }
      }
    },
    'hindi': {
      'YouTube Video': {
        'Conversational': {
          short: `${topic} ‡§ï‡•ã ‡§∏‡§∞‡§≤ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ: ‡§è‡§ï ‡§ö‡•Ä‡§ú‡§º ‡§ú‡•ã ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§¨‡§¶‡§≤ ‡§¶‡•á‡§§‡•Ä ‡§π‡•à‡•§ ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ‡§§‡§∞ ‡§≤‡•ã‡§ó ‡§á‡§∏ ‡§Æ‡•Ç‡§≤ ‡§∏‡§ø‡§¶‡•ç‡§ß‡§æ‡§Ç‡§§ ‡§ï‡•ã ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π miss ‡§ï‡§∞ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§`,
          medium: `‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ${topic} ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§∏‡•á ‡§¨‡§§‡§æ‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡•Ä ‡§ó‡§≤‡§§‡•Ä: ‡§≤‡•ã‡§ó ‡§ú‡§ü‡§ø‡§≤ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ focus ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§¨‡§æ‡§§‡•ã‡§Ç ‡§ï‡•ã master ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§ú‡§æ‡§Ø‡•§`,
          long: `‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ${topic} ‡§ï‡•ã ‡§á‡§∏ ‡§§‡§∞‡§π explain ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ ‡§ú‡•ã practical ‡§î‡§∞ ‡§∏‡§Æ‡§ù‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§π‡•ã‡•§ ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ‡§§‡§∞ ‡§≤‡•ã‡§ó ‡§á‡§∏‡•á ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§â‡§≤‡•ç‡§ü‡•á ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á approach ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç - ‡§µ‡•á fundamentals ‡§∏‡§Æ‡§ù‡•á ‡§¨‡§ø‡§®‡§æ advanced tactics ‡§Æ‡•á‡§Ç jump ‡§ï‡§∞ ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§∏‡§ö‡•ç‡§ö‡§æ‡§à ‡§Ø‡§π ‡§π‡•à: ${topic} ‡§ú‡§ü‡§ø‡§≤ formulas follow ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§Ø‡§π core principles ‡§ï‡•ã ‡§∏‡§Æ‡§ù‡§®‡•á ‡§î‡§∞ ‡§â‡§®‡•ç‡§π‡•á‡§Ç consistently apply ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§π‡•à‡•§`
        }
      }
    },
    'spanish': {
      'YouTube Video': {
        'Conversational': {
          short: `${topic} simplificado: Lo √∫nico que lo cambia todo. La mayor√≠a se pierde este principio fundamental completamente.`,
          medium: `Te explico ${topic} r√°pidamente. El error m√°s grande: la gente se enfoca en estrategias complicadas en lugar de dominar lo b√°sico.`,
          long: `Te voy a explicar ${topic} de manera pr√°ctica y entendible. La mayor√≠a lo enfoca completamente al rev√©s - saltan a t√°cticas avanzadas sin entender los fundamentos. La verdad es: ${topic} no se trata de seguir f√≥rmulas complejas. Se trata de entender los principios b√°sicos y aplicarlos consistentemente.`
        }
      }
    }
  };

  const langTemplates = contentTemplates[language] || contentTemplates['english'];
  const scriptTemplates = langTemplates[scriptType] || langTemplates['YouTube Video'];
  const toneTemplates = scriptTemplates[tone] || scriptTemplates['Conversational'];

  if (targetWords <= 50) {
    return toneTemplates.short || `${topic} simplified: The key insight that changes everything. Most people miss this fundamental principle completely.`;
  } else if (targetWords <= 100) {
    return toneTemplates.medium || `Let me break down ${topic} quickly. The main insight: most people approach this wrong. They focus on tactics, not fundamentals.`;
  } else {
    return toneTemplates.long || `Let me explain ${topic} in a way that's both ${tone.toLowerCase()} and actionable. The key is understanding that most people approach it completely wrong. They focus on surface-level tactics instead of fundamental principles.`;
  }
}
